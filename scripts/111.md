ì´ë²ˆ ì˜ìƒì—ì„œëŠ” Build Toolê³¼ Android Gradle Pluginì— ëŒ€í•´ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## Build tool

ì†ŒìŠ¤ì½”ë“œë¥¼ ë°”ì´ë„ˆë¦¬ì½”ë“œë¡œ ì»´íŒŒì¼í•œ ë’¤, ê·¸ ë°”ì´ë„ˆë¦¬ ì½”ë“œë“¤ì„ ì„œë¡œ ë§í¬í•´ì„œ ì‹¤í–‰ê°€ëŠ¥í•œ íŒŒì¼ë¡œ íŒ¨í‚¤ì§•í•˜ëŠ” ê²ƒì„ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ë¹Œë“œí•œë‹¤ê³  í•©ë‹ˆë‹¤. ì‹¤ì œ í”„ë¡œë•ì…˜ì˜ ë¹Œë“œ ê³¼ì •ì€ ì»´íŒŒì¼ê³¼ ë§í¬ ì´ì™¸ì—ë„ ë‹¤ìŒê³¼ ê°™ì´ ì—¬ëŸ¬ê°€ì§€ ì‘ì—…ì´ í•„ìš”í•©ë‹ˆë‹¤.

1. ì—°ê´€ëœ ì˜ì¡´ì„± ë‹¤ìš´ë¡œë“œ
2. ì†ŒìŠ¤ ì½”ë“œë¥¼ ë°”ì´ë„ˆë¦¬ ì½”ë“œë¡œ ì»´íŒŒì¼
3. ë°”ì´ë„ˆë¦¬ ì½”ë“œ ë§í¬í•˜ì—¬ ì‹¤í–‰ê°€ëŠ¥ íŒŒì¼ë¡œ íŒ¨í‚¤ì§•
4. í…ŒìŠ¤íŠ¸ ìˆ˜í–‰
5. í”„ë¡œë•ì…˜ ì‹œìŠ¤í…œì— ë°°í¬

ì†ŒìŠ¤ì½”ë“œë¥¼ ìˆ˜ì •í•  ë•Œ ë§ˆë‹¤ ì´ ê³¼ì •ì„ í•˜ë‚˜í•˜ë‚˜ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ ë…¸ë ¥ì´ ë§ì´ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì—, ì¼ë°˜ì ìœ¼ë¡œëŠ” ì´ ê³¼ì •ì„ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•´ì£¼ëŠ” Build Toolì´ë¼ëŠ” í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. Android ê°œë°œì— ì±„íƒëœ ì–¸ì–´ì¸ Javaì˜ Build Toolì€ Ant > Maven > Gradleì˜ ìˆœìœ¼ë¡œ ê°œì„ ë˜ì–´ì ¸ ì™”ìŠµë‹ˆë‹¤.

### Makeì™€ Ant

1976ë…„ì— ë°œí‘œëœ [Make](https://www.gnu.org/software/make/)ëŠ” ë‹¹ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê±°ì˜ ìœ ì¼í•œ Build Toolì´ì—ˆëŠ”ë°ìš”, ì´ˆê¸° Javaì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ ê°œë°œì— ì‚¬ìš©ë˜ì—ˆìœ¼ë‚˜ ë§ì€ ê·œì¹™ì´ Java ì‹œìŠ¤í…œê³¼ ë§ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

[Ant (Another Neat Tool)](https://ant.apache.org/)ëŠ” `Make`ë¥¼ ëŒ€ì²´í•˜ê¸° ìœ„í•´ Apacheì—ì„œ 2000ë…„ë„ì— ë°œí‘œí•œ Build Toolë¡œ, `Make`ì™€ ìœ ì‚¬í•˜ì§€ë§Œ Javaë¥¼ ì‚¬ìš©í•´ êµ¬í˜„ë˜ì—ˆìŠµë‹ˆë‹¤. `Makefile` í˜•ì‹ì„ ì‚¬ìš©í•˜ëŠ” `Make`ì™€ ë‹¬ë¦¬ `Ant`ëŠ” XMLì„ ì‚¬ìš©í•˜ë©°, ë¹Œë“œ íŒŒì¼ëª…ì€ ê´€ë¡€ìƒ `build.xml` ì´ë¼ê³  í•©ë‹ˆë‹¤.

### Maven

`Ant`ëŠ” ì½”ë”© ê·œì¹™ì´ë‚˜ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ ê°•ìš”í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ìœ ì—°ì„±ì´ ë†’ì§€ë§Œ ê°œë°œìì˜ ë¶€ë‹´ì´ ì»¤ì¡Œê³ , Remote repositoryëŠ” ê°€ì ¸ì˜¬ ìˆ˜ ì—†ë‹¤ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

[Maven](https://maven.apache.org/)ì€ 2004ë…„ Apacheì—ì„œ ë°œí‘œí•œ Build Toolë¡œ, XML ê¸°ë°˜ì˜ ì½”ë”© ê·œì¹™ì„ ê°•í™”í–ˆê³  Remote repositoryë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. `Maven`ì˜ êµ¬ì„± íŒŒì¼ëª…ì€ ê·œì¹™ì— ë”°ë¼ `pom.xml` ì´ë¼ê³  í•©ë‹ˆë‹¤. 


### Gradle

[Gradle](https://gradle.org/)ì€ `Ant` ë° `Maven`ì˜ ê°œë…ì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ëœ Build Toolì…ë‹ˆë‹¤. 2008ë…„ ì²˜ìŒ ë°œí‘œë˜ì—ˆëŠ”ë° XML ëŒ€ì‹  [Groovy](https://groovy-lang.org/) ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ê²Œ ë³€ê²½ë˜ì—ˆê³ , ê·œì¹™ì— ë”°ë¼ `build.gradle`ì´ë¼ëŠ” êµ¬ì„± íŒŒì¼ëª…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. Javaì™€ ìœ ì‚¬í•œ ë¬¸ë²•ì„ ê°€ì§„ ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ `Groovy`ë¥¼ [Domain-specific language](https://docs.groovy-lang.org/docs/latest/html/documentation/core-domain-specific-languages.html)ë¡œ ì±„íƒí•¨ìœ¼ë¡œì¨ ê°€ë…ì„±ì´ ì¢‹ì•„ì¡Œê³ , ì»´íŒŒì¼ì„ í•  í•„ìš”ê°€ ì—†ì–´ì¡ŒìŠµë‹ˆë‹¤.


## Android Gradle Plugin

êµ¬ê¸€ì€ Gradleì´ ìˆ˜ë§ì€ ê°€ëŠ¥ì„±ì„ ê°€ì§€ê³  ìˆë‹¤ê³  íŒë‹¨í–ˆê³  [2013ë…„ Google I/O](https://youtu.be/LCJAgPkpmR0)ì—ì„œ Gradleì„ ê¸°ë°˜ìœ¼ë¡œ í•œ Android SDK build systemì„ ë°œí‘œí•©ë‹ˆë‹¤. 

ê·¸ëŸ° ì´ìœ ë¡œ Android Studioì—ì„œ Gradleì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ [Android Gradle plugin(AGP)](https://developer.android.com/studio/releases/gradle-plugin)ë¥¼ ì œì‘í•˜ì˜€ìŠµë‹ˆë‹¤. AGPëŠ” Gradleì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ë©´ì„œ, Android ì•±ì„ ë¹Œë“œí•˜ëŠ” ë° ì‚¬ìš©í•˜ëŠ” ëª‡ ê°€ì§€ ê¸°ëŠ¥ë“¤ì´ ì¶”ê°€ëœ ê²ƒì…ë‹ˆë‹¤. 

ì´ˆê¸°ì—ëŠ” [Gradle ë¦´ë¦¬ì¦ˆ ë²„ì „](https://gradle.org/releases/)ê³¼ AGP ë²„ì „ì´ ì¼ì¹˜í•˜ì§€ ì•Šì•„ í—·ê°ˆë¦¬ëŠ” ë¬¸ì œê°€ ìˆì—ˆì§€ë§Œ 7.0 ë¶€í„°ëŠ” AGPì˜ ë©”ì´ì € ë²„ì „ì„ gradle ë²„ì „ê³¼ ë™ê¸°í™”ë˜ë„ë¡ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.


| Plugin version | Required Gradle version |
| -------------- | ----------------------- |
| 1.0.0 - 1.1.3  | 2.2.1 - 2.3             |
| 1.2.0 - 1.3.1  | 2.2.1 - 2.9             |
| 1.5.0          | 2.2.1 - 2.13            |
| 2.0.0 - 2.1.2  | 2.10 - 2.13             |
| 2.1.3 - 2.2.3  | 2.14.1 - 3.5            |
| 2.3.0+         | 3.3+                    |
| 3.0.0+         | 4.1+                    |
| 3.1.0+         | 4.4+                    |
| 3.2.0 - 3.2.1  | 4.6+                    |
| 3.3.0 - 3.3.3  | 4.10.1+                 |
| 3.4.0 - 3.4.3  | 5.1.1+                  |
| 3.5.0 - 3.5.4  | 5.4.1+                  |
| 3.6.0 - 3.6.4  | 5.6.4+                  |
| 4.0.0+         | 6.1.1+                  |
| 4.1.0+         | 6.5+                    |
| 4.2.0+         | 6.7.1+                  |
| 7.0            | 7.0+                    |
| 7.1            | 7.2+                    |
| 7.2            | 7.3+                    |

AGPì˜ ë²„ì „ê´€ë¦¬ ì²´ê³„ëŠ” 2020ë…„ 11ì›”ë¶€í„° [ë‹¤ìŒ](https://developer.android.com/studio/releases/gradle-plugin#versioning-update)ê³¼ ê°™ì´ ê´€ë¦¬ë˜ê³  ìˆìŠµë‹ˆë‹¤.

> - ì´ì œ AGPëŠ” ì‹œë§¨í‹± ë²„ì „ ê´€ë¦¬ë¥¼ ì‚¬ìš©í•˜ê³ , ì£¼ìš” ë²„ì „ì—ëŠ” ë¸Œë ˆì´í‚¹ ì²´ì¸ì§€ê°€ íƒ€ê²ŸíŒ…ë©ë‹ˆë‹¤.
>
> - Gradle ì£¼ìš” ë²„ì „ì— ë§ì¶˜ AGP ì£¼ìš” ë²„ì „ì´ ë§¤ë…„ 1íšŒ ì¶œì‹œë  ì˜ˆì •ì…ë‹ˆë‹¤.
>
> - AGP 4.2 ì´í›„ ì¶œì‹œë˜ëŠ” ë²„ì „ì€ 7.0ì´ë©° Gradle ë²„ì „ 7.xë¡œ ì—…ê·¸ë ˆì´ë“œí•´ì•¼ í•©ë‹ˆë‹¤. AGPì˜ ëª¨ë“  ì£¼ìš” ë²„ì „ì—ëŠ” ê¸°ë³¸ Gradle ë„êµ¬ì˜ ì£¼ìš” ë²„ì „ ì—…ê·¸ë ˆì´ë“œê°€ í•„ìš”í•©ë‹ˆë‹¤.
>
> - APIëŠ” 1ë…„ ì •ë„ ë¯¸ë¦¬ ì§€ì› ì¤‘ë‹¨ë  ì˜ˆì •ì´ë©° ì´ë¥¼ ëŒ€ì²´í•˜ëŠ” ê¸°ëŠ¥ì´ ê³§ë°”ë¡œ ì œê³µë©ë‹ˆë‹¤. ì§€ì› ì¤‘ë‹¨ëœ APIëŠ” ì•½ 1ë…„ í›„, ë‹¤ìŒ ì£¼ìš” ì—…ë°ì´íŠ¸ ë™ì•ˆ ì‚­ì œë©ë‹ˆë‹¤.

Gradleì„ í†µí•œ ì•ˆë“œë¡œì´ë“œ ì•± ëª¨ë“ˆì˜ ë¹Œë“œ í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì´ë£¨ì–´ì§€ê²Œ ë©ë‹ˆë‹¤.

![ì¶œì²˜: https://developer.android.com/studio/build](https://developer.android.com/images/tools/studio/build-process_2x.png)

1. ì»´íŒŒì¼ëŸ¬ëŠ” ì†ŒìŠ¤ ì½”ë“œë¥¼ DEX(Dalvik Executable) íŒŒì¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤. ì—¬ê¸°ì—ëŠ” Android ì¥ì¹˜ì—ì„œ ì‹¤í–‰ë˜ëŠ” ë°”ì´íŠ¸ ì½”ë“œê°€ í¬í•¨ë˜ê³  ë‹¤ë¥¸ ëª¨ë“  ê²ƒì€ ì»´íŒŒì¼ëœ ë¦¬ì†ŒìŠ¤ë¡œ ë³€í™˜ë©ë‹ˆë‹¤.
2. íŒ¨í‚¤ì§€ í”„ë¡œê·¸ë¨ì€ ì„ íƒí•œ ë¹Œë“œ ëŒ€ìƒì— ë”°ë¼ DEX íŒŒì¼ê³¼ ì»´íŒŒì¼ëœ ë¦¬ì†ŒìŠ¤ë¥¼ APK ë˜ëŠ” AABë¡œ ê²°í•©í•©ë‹ˆë‹¤. ì•±ì„ Android ê¸°ê¸°ì— ì„¤ì¹˜í•˜ê±°ë‚˜ Google Playì™€ ê°™ì€ ìŠ¤í† ì–´ì— ë°°í¬í•˜ë ¤ë©´ APK ë˜ëŠ” AABì— ì„œëª…í•´ì•¼ í•©ë‹ˆë‹¤.
3. íŒ¨í‚¤ì§€ ë„êµ¬ëŠ” ë””ë²„ê·¸ ë˜ëŠ” ë¦´ë¦¬ìŠ¤ í‚¤ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ APK ë˜ëŠ” AABì— ì„œëª…í•©ë‹ˆë‹¤.
    - ì•±ì˜ ë””ë²„ê·¸ ë²„ì „, ì¦‰ í…ŒìŠ¤íŠ¸ ë° í”„ë¡œíŒŒì¼ë§ë§Œì„ ìœ„í•œ ì•±ì„ ë¹Œë“œí•˜ëŠ” ê²½ìš° íŒ¨í‚¤ì§€ í”„ë¡œê·¸ë¨ì€ ë””ë²„ê·¸ í‚¤ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ì•±ì— ì„œëª…í•©ë‹ˆë‹¤. Android StudioëŠ” ë””ë²„ê·¸ í‚¤ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìë™ìœ¼ë¡œ êµ¬ì„±í•©ë‹ˆë‹¤.
    - ì™¸ë¶€ì— ì¶œì‹œí•˜ë ¤ëŠ” ì•±ì˜ ì¶œì‹œ ë²„ì „ì„ ë¹Œë“œí•˜ëŠ” ê²½ìš° íŒ¨í‚¤ì§€ ë„êµ¬ëŠ” êµ¬ì„±í•´ì•¼ í•˜ëŠ” ì¶œì‹œ í‚¤ ì €ì¥ì†Œë¡œ ì•±ì— ì„œëª…í•©ë‹ˆë‹¤.
4. ìµœì¢… APKë¥¼ ìƒì„±í•˜ê¸° ì „ì— íŒ¨í‚¤ì§€ í”„ë¡œê·¸ë¨ì€ zipalign ë„êµ¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ê¸°ê¸°ì—ì„œ ì‹¤í–‰í•  ë•Œ ë” ì ì€ ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì•±ì„ ìµœì í™”í•©ë‹ˆë‹¤.

## Kotlin script (KTS)

[Gradle 5.0](https://docs.gradle.org/5.0/release-notes.html)ì—ëŠ” ì—¬ëŸ¬ê°€ì§€ í° ë³€ê²½ì‚¬í•­ì´ ìˆì—ˆëŠ”ë° ê·¸ ì¤‘ í•˜ë‚˜ê°€ Java 11ì˜ ë„ì…ê³¼ Kotlin-DSLì˜ ë„ì…ì…ë‹ˆë‹¤. Groovyë¥¼ ì‚¬ìš©í•˜ë˜ ê¸°ì¡´ì˜ Gradle ìŠ¤í¬ë¦½íŒ…ì„ Kotlinìœ¼ë¡œë„ í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆëŠ”ë°, [AGPì—ëŠ” 4.0ë¶€í„° ì ìš©](https://developer.android.com/studio/build/migrate-to-kts)ë˜ì—ˆìŠµë‹ˆë‹¤. êµ¬ê¸€ì—ì„œëŠ” Kotlin-DSLì„ Kotlin script (KTS)ë¼ê³  ë¶€ë¥´ëŠ”ë° ë‘˜ì€ ì‚¬ì‹¤ìƒ ë™ì¼í•œ ê²ƒìœ¼ë¡œ ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

í˜„ì¬ `build.gradle`ì— KTSë¥¼ ì ìš©í•˜ëŠ” ê²½ìš°ì˜ ì¥ì ê³¼ ë‹¨ì ì€ ë‹¤ìŒê³¼ ê°™ì´ ì •ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¥ì 
- IDEì˜ ì§€ì›ìœ¼ë¡œ í–¥ìƒëœ í¸ì§‘í™˜ê²½
  - ì»´íŒŒì¼ íƒ€ì„ì— ì—ëŸ¬ í™•ì¸
  - ì½”ë“œ íƒìƒ‰
  - ìë™ ì™„ì„±
  - êµ¬ë¬¸ ê°•ì¡°
- ìµìˆ™í•œ ì½”í‹€ë¦° ì–¸ì–´ë¡œ ì‘ì„± ê°€ëŠ¥

ë‹¨ì 
- ë¹Œë“œ ìºì‹œê°€ Invalidate ëê±°ë‚˜, í´ë¦° ë¹Œë“œì‹œì—ëŠ” Groovy DSLë³´ë‹¤ ëŠë¦¼
- Java 8 ì´ìƒì´ í•„ìš”
- Newer dependency version inspection ê¸°ëŠ¥ ë¯¸ì§€ì›

ì‹¤ì œ ë¹Œë“œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•œ ë¹„êµ ê²°ê³¼ëŠ” [ë‹¤ìŒ](https://github.com/gradle/gradle/issues/15886#issuecomment-1036085182)ê³¼ ê°™ë‹¤ê³  í•©ë‹ˆë‹¤. í´ë¦°ë¹Œë“œëŠ” ëŠë¦¬ì§€ë§Œ abië³€ê²½ì´ ì—†ì„ë•Œì˜ ë¹Œë“œëŠ” ë§¤ìš° ë¹¨ë¼ì§€ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

| Use Case                | Groovy    | Kotlin    | Difference                |
| ----------------------- | --------- | --------- | ------------------------- |
| First use               | ğŸŸ¢ 38.855s | ğŸ”´ 63.54s  | Groovy DSL is 1.6x faster |
| buildSrc abi change     | ğŸŸ¢ 25.307  | ğŸ”´ 35.014s | Groovy DSL is 1.4x faster |
| buildSrc non-abi change | ğŸ”´ 24.526s | ğŸŸ¢ 4.732s  | Kotlin DSL is 5x faster   |

í˜„ì¬ë¡œì„œëŠ” ì†ë„ê°€ ëŠë¦¬ë‹¤ëŠ” ë‹¨ì ì´ ìˆê¸´ í•˜ì§€ë§Œ IDEì˜ ì§€ì›ì— ë”°ë¥¸ í¸ì§‘í™˜ê²½ì˜ ê°œì„ ì ì´ ë§¤ìš° í¬ê¸° ë•Œë¬¸ì—, êµ¬ê¸€ì—ì„œëŠ” ì•ìœ¼ë¡œ KTSê°€ ë” ë§ì´ ì‚¬ìš©ë  ê²ƒì´ë¼ëŠ” [ì „ë§](https://developer.android.com/studio/build/migrate-to-kts)ì„ í•˜ê³  ìˆìŠµë‹ˆë‹¤.

> In the future, KTS will be preferred over Groovy for writing Gradle scripts because Kotlin is more readable and offers better compile-time checking and IDE support.

ì´ë ‡ê²Œ í•´ì„œ Build Toolê³¼ Androidì˜ Gradle Pluginì— ëŒ€í•´ ì•Œì•„ë³´ì•˜ìŠµë‹ˆë‹¤.
